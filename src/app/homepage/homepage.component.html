<div class="container center">
  <div class="details">
    <button
      class="theme-switch"
      type="button"
      aria-label="Alterar tema"
      mat-icon-button
      (click)="toggleTheme()"
      matTooltip="Alterar tema"
    >
      <mat-icon>
        {{ theme() === "light" ? "light_mode" : "dark_mode" }}
      </mat-icon>
    </button>

    <button class="goGit" matTooltip="Repositório" aria-label="Repositório">
      <a href="https://github.com/aliciamendes/todo-list" target="_blank">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 50 50"
          width="50px"
          height="50px"
          fill="white"
        >
          <path
            d="M25,4c0.566,0,1.097,0.22,1.497,0.62L45.38,23.503c0.826,0.826,0.826,2.169,0,2.995L26.497,45.38C26.097,45.78,25.566,46,25,46s-1.097-0.22-1.497-0.62L4.62,26.497c-0.826-0.826-0.826-2.169,0-2.995l12.32-12.32l2.274,2.274c-0.546,2.031,0.005,4.248,1.543,5.786c0.368,0.368,0.786,0.685,1.243,0.945v9.63c-1.822,1.05-3,3.007-3,5.182c0,3.308,2.692,6,6,6s6-2.692,6-6c0-2.175-1.178-4.132-3-5.182v-7.575l1.214,1.214c-0.546,2.031,0.005,4.248,1.543,5.786C31.891,30.376,33.397,31,35,31c1.603,0,3.109-0.624,4.243-1.757c2.339-2.339,2.339-6.146,0-8.485c-1.128-1.128-2.627-1.749-4.223-1.749c-0.529,0-1.055,0.07-1.562,0.206l-2.672-2.672c0.546-2.031-0.005-4.248-1.543-5.786c-1.128-1.128-2.627-1.749-4.223-1.749c-0.529,0-1.055,0.07-1.562,0.206L21.183,6.94l2.32-2.32C23.903,4.22,24.434,4,25,4 M25,2c-1.054,0-2.108,0.402-2.912,1.206L18.354,6.94l4.624,4.624c0.628-0.37,1.335-0.556,2.041-0.556c1.017,0,2.032,0.386,2.809,1.163c1.316,1.316,1.509,3.316,0.607,4.85l4.543,4.543c0.628-0.37,1.335-0.556,2.041-0.556c1.017,0,2.032,0.386,2.809,1.163c1.562,1.562,1.562,4.095,0,5.657C37.047,28.609,36.024,29,35,29s-2.047-0.391-2.828-1.172c-1.316-1.316-1.509-3.316-0.607-4.85l-4.543-4.543c-0.324,0.19-0.666,0.33-1.021,0.421v12.285c1.722,0.446,3,1.997,3,3.859c0,2.209-1.791,4-4,4s-4-1.791-4-4c0-1.862,1.278-3.413,3-3.859V18.857c-0.669-0.173-1.305-0.505-1.828-1.028c-1.316-1.316-1.509-3.316-0.607-4.85L16.94,8.354L3.206,22.088c-1.608,1.608-1.608,4.215,0,5.823l18.882,18.882C22.892,47.598,23.946,48,25,48s2.108-0.402,2.912-1.206l18.882-18.882c1.608-1.608,1.608-4.215,0-5.823L27.912,3.206C27.108,2.402,26.054,2,25,2L25,2z"
          />
        </svg>
        <span>GitHub</span>
      </a>
    </button>
  </div>

  <div class="content">
    <main>
      <div class="content_title center">
        <svg
          width="97"
          height="90"
          viewBox="0 0 97 90"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            width="96.8981"
            height="90"
            rx="15"
            fill="#D9D9D9"
            fill-opacity="0.25"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M47.9704 17C52.1476 17 55.5055 17 58.2437 17.1997C57.9186 18.011 57.7397 18.8967 57.7397 19.8242V21.236H56.1587C52.2602 21.236 49.0998 24.3963 49.0998 28.2948C49.0998 32.1933 52.2602 35.3536 56.1587 35.3536H57.7397V36.7654C57.7397 40.6639 60.9 43.8242 64.7985 43.8242C67.1764 43.8242 69.2796 42.6485 70.5586 40.8466V50.8823C70.5586 61.5305 70.5586 66.8546 67.2506 70.1626C63.9426 73.4706 58.6185 73.4706 47.9704 73.4706H47.0677C36.4195 73.4706 31.0954 73.4706 27.7875 70.1626C24.4795 66.8546 24.4795 61.5305 24.4795 50.8824V39.5882C24.4795 28.94 24.4795 23.6159 27.7875 20.308C31.0954 17 36.4195 17 47.0677 17H47.9704ZM35.9991 42.4108C34.4397 42.4108 33.1756 43.675 33.1756 45.2344C33.1756 46.7938 34.4397 48.0579 35.9991 48.0579H47.5189C49.0783 48.0579 50.3424 46.7938 50.3424 45.2344C50.3424 43.675 49.0783 42.4108 47.5189 42.4108H35.9991ZM35.9991 50.8814C34.4397 50.8814 33.1756 52.1456 33.1756 53.705C33.1756 55.2644 34.4397 56.5285 35.9991 56.5285L53.2788 56.5285C54.8382 56.5285 56.1023 55.2644 56.1023 53.705C56.1023 52.1456 54.8382 50.8814 53.2788 50.8814H35.9991ZM35.9991 59.352C34.4397 59.352 33.1756 60.6162 33.1756 62.1756C33.1756 63.7349 34.4397 64.9991 35.9991 64.9991H47.5189C49.0783 64.9991 50.3424 63.7349 50.3424 62.1756C50.3424 60.6162 49.0783 59.352 47.5189 59.352H35.9991Z"
            fill="#EEEEEE"
          />
          <path
            d="M64.7988 19.8242L64.7988 36.7654"
            stroke="#EEEEEE"
            stroke-width="5.64706"
            stroke-linecap="round"
          />
          <path
            d="M73.4385 28.2949L56.1588 28.2949"
            stroke="#EEEEEE"
            stroke-width="5.64706"
            stroke-linecap="round"
          />
        </svg>

        <h2>TaskEase</h2>
      </div>

      <div class="content_message">
        <span>What do you have to do?</span>

        <div class="messageBox">
          <input
            id="messageInput"
            [autocomplete]="false"
            required
            minlength="3"
            type="text"
            [placeholder]="placeholder"
            (keyup.enter)="addedNote()"
            [formControl]="getStringInput.controls.descriptionNote"
          />
          <button id="sendButton" (click)="addedNote()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 664 663"
            >
              <path
                fill="none"
                d="M646.293 331.888L17.7538 17.6187L155.245 331.888M646.293 331.888L17.753 646.157L155.245 331.888M646.293 331.888L318.735 330.228L155.245 331.888"
              ></path>
              <path
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="33.67"
                stroke="#6c6c6c"
                d="M646.293 331.888L17.7538 17.6187L155.245 331.888M646.293 331.888L17.753 646.157L155.245 331.888M646.293 331.888L318.735 330.228L155.245 331.888"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </main>

    @if (isNote) {
    <div class="noteList">
      <div class="list_info">
        <span>Done: {{ isDone() }}</span>

        <div class="menu">
          <div class="item">
            <a href="#" class="link">
              <span> Sort </span>
              <svg viewBox="0 0 360 360" xml:space="preserve">
                <g id="SVGRepo_iconCarrier">
                  <path
                    id="XMLID_225_"
                    d="M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393 c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393 s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z"
                  ></path>
                </g>
              </svg>
            </a>
            <div class="submenu">
              @for (item of options; track $index) {
              <div class="submenu-item">
                <button class="submenu-link" (click)="item.function()">
                  {{ item.name }}
                </button>
              </div>
              }
            </div>
          </div>
        </div>
      </div>

      <div class="list_notes">
        <div *ngFor="let item of notes; let i = index" class="content_list">
          <div class="wrapper_check">
            @if (!verify(item)) {
            <div class="wrapper_item">
              <div class="input-p">
                <input
                  type="checkbox"
                  [checked]="item.done"
                  (click)="handleDone(i)"
                />
                <p
                  class="list_item"
                  [ngStyle]="{ 'text-decoration': getTextDecoration(item), 'color': getColor(item),  }"
                  [title]="item.description"
                >
                  {{ item.description }}
                </p>

                @if (item.done === true) {
                <svg
                  (click)="handleDone(i)"
                  class="check_item_done"
                  width="10"
                  height="8"
                  viewBox="0 0 10 8"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3.39644 7.31067L0.146441 4.06066C-0.0488135 3.86541 -0.0488135 3.54883 0.146441 3.35355L0.853531 2.64644C1.04879 2.45117 1.36539 2.45117 1.56064 2.64644L3.75 4.83578L8.43936 0.146441C8.63461 -0.0488135 8.95122 -0.0488135 9.14647 0.146441L9.85356 0.853551C10.0488 1.0488 10.0488 1.36539 9.85356 1.56066L4.10355 7.31069C3.90828 7.50594 3.5917 7.50594 3.39644 7.31067Z"
                    fill="black"
                  />
                </svg>
                }
              </div>

              @if (item.isPinned && (openMenuIndex !== i && !verify(item)) ) {
              <span class="material-symbols-outlined"> keep_off </span>
              }
            </div>

            } @else {
            <div class="wrapper_item_edit">
              <input
                class="inputEditNote"
                required
                minlength="3"
                type="text"
                (keyup.enter)="saveEdit(item.description!)"
                [(ngModel)]="item.description"
              />
              <button (click)="saveEdit(item.description!)" class="editButton">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                  />
                </svg>
              </button>
            </div>

            } @if (openMenuIndex !== i && !verify(item)) {
            <button class="buttonMore" (click)="toggleMenu(i)">
              <span class="material-symbols-outlined">more_vert</span>
            </button>

            } @if (openMenuIndex === i) {
            <div class="moreOptions">
              <button
                class="material-symbols-outlined"
                (click)="isPin ? unpinNote(item) : pinNote(item)"
              >
                keep
              </button>
              <button
                class="material-symbols-outlined"
                (click)="editMenu(item)"
              >
                edit
              </button>
              <button
                class="material-symbols-outlined"
                (click)="deleteNote(item)"
              >
                delete
              </button>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</div>
